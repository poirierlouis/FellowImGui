!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("imgui-js")):"function"==typeof define&&define.amd?define(["exports","imgui-js"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ImGui_Impl={},e.ImGui)}(this,(function(e,t){"use strict";function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var l=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,l.get?l:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var l=n(t);let a="",o=null;e.gl=null;let r=null,u=null,i=null,g=null,s=null,c=-1,d=-1,p=-1,f=null,y=null,v=null;e.ctx=null;let x=0;function E(e){e.clipboardData&&e.clipboardData.setData("text/plain",a)}function D(e){e.clipboardData&&e.clipboardData.setData("text/plain",a)}function I(e){e.clipboardData&&(a=e.clipboardData.getData("text/plain"))}function m(){null!==o&&(o.width=o.scrollWidth,o.height=o.scrollHeight)}function b(e){console.log("Gamepad connected at index %d: %s. %d buttons, %d axes.",e.gamepad.index,e.gamepad.id,e.gamepad.buttons.length,e.gamepad.axes.length)}function w(e){console.log("Gamepad disconnected at index %d: %s.",e.gamepad.index,e.gamepad.id)}function S(e){const t=l.GetIO();t.KeyCtrl=!1,t.KeyShift=!1,t.KeyAlt=!1,t.KeySuper=!1;for(let e=0;e<t.KeysDown.length;++e)t.KeysDown[e]=!1;for(let e=0;e<t.MouseDown.length;++e)t.MouseDown[e]=!1}const N={NumpadEnter:176};function R(e){const t=l.GetIO();t.KeyCtrl=e.ctrlKey,t.KeyShift=e.shiftKey,t.KeyAlt=e.altKey,t.KeySuper=e.metaKey;const n=N[e.code]||e.keyCode;l.ASSERT(n>=0&&n<l.ARRAYSIZE(t.KeysDown)),t.KeysDown[n]=!0,"Tab"===e.key&&e.preventDefault()}function T(e){const t=l.GetIO();t.KeyCtrl=e.ctrlKey,t.KeyShift=e.shiftKey,t.KeyAlt=e.altKey,t.KeySuper=e.metaKey;const n=N[e.code]||e.keyCode;l.ASSERT(n>=0&&n<l.ARRAYSIZE(t.KeysDown)),t.KeysDown[n]=!1,t.WantCaptureKeyboard&&e.preventDefault()}function L(e){const t=l.GetIO();t.AddInputCharacter(e.charCode),t.WantCaptureKeyboard&&e.preventDefault()}function _(e){const t=l.GetIO();t.MousePos.x=e.offsetX,t.MousePos.y=e.offsetY,t.WantCaptureMouse&&e.preventDefault()}const A=[0,2,1,3,4];function C(e){const t=l.GetIO();t.MousePos.x=e.offsetX,t.MousePos.y=e.offsetY,t.MouseDown[A[e.button]]=!0}function h(e){l.GetIO().WantCaptureMouse&&e.preventDefault()}function M(e){const t=l.GetIO();t.MouseDown[A[e.button]]=!1,t.WantCaptureMouse&&e.preventDefault()}function P(e){const t=l.GetIO();let n=1;switch(e.deltaMode){case e.DOM_DELTA_PIXEL:n=.01;break;case e.DOM_DELTA_LINE:n=.2;break;case e.DOM_DELTA_PAGE:n=1}t.MouseWheelH=e.deltaX*n,t.MouseWheel=-e.deltaY*n,t.WantCaptureMouse&&e.preventDefault()}function B(){const t=l.GetIO(),n=e.gl&&e.gl.getParameter(e.gl.TEXTURE_BINDING_2D),{width:a,height:o,pixels:r}=t.Fonts.GetTexDataAsRGBA32();if(v=e.gl&&e.gl.createTexture(),e.gl&&e.gl.bindTexture(e.gl.TEXTURE_2D,v),e.gl&&e.gl.texParameteri(e.gl.TEXTURE_2D,e.gl.TEXTURE_MIN_FILTER,e.gl.LINEAR),e.gl&&e.gl.texParameteri(e.gl.TEXTURE_2D,e.gl.TEXTURE_MAG_FILTER,e.gl.LINEAR),e.gl&&e.gl.texImage2D(e.gl.TEXTURE_2D,0,e.gl.RGBA,a,o,0,e.gl.RGBA,e.gl.UNSIGNED_BYTE,r),t.Fonts.TexID=v||{foo:"bar"},e.ctx){const e=document.createElement("canvas");e.width=a,e.height=o;const n=e.getContext("2d");if(null===n)throw new Error;const l=n.getImageData(0,0,a,o);l.data.set(r),n.putImageData(l,0,0),t.Fonts.TexID=e}e.gl&&n&&e.gl.bindTexture(e.gl.TEXTURE_2D,n)}function F(){l.GetIO().Fonts.TexID=null,e.gl&&e.gl.deleteTexture(v),v=null}function K(){r=e.gl&&e.gl.createProgram(),u=e.gl&&e.gl.createShader(e.gl.VERTEX_SHADER),i=e.gl&&e.gl.createShader(e.gl.FRAGMENT_SHADER),e.gl&&e.gl.shaderSource(u,["uniform mat4 ProjMtx;","attribute vec2 Position;","attribute vec2 UV;","attribute vec4 Color;","varying vec2 Frag_UV;","varying vec4 Frag_Color;","void main() {","\tFrag_UV = UV;","\tFrag_Color = Color;","\tgl_Position = ProjMtx * vec4(Position.xy,0,1);","}"].join("\n")),e.gl&&e.gl.shaderSource(i,["precision mediump float;","uniform sampler2D Texture;","varying vec2 Frag_UV;","varying vec4 Frag_Color;","void main() {","\tgl_FragColor = Frag_Color * texture2D(Texture, Frag_UV);","}"].join("\n")),e.gl&&e.gl.compileShader(u),e.gl&&e.gl.compileShader(i),e.gl&&e.gl.attachShader(r,u),e.gl&&e.gl.attachShader(r,i),e.gl&&e.gl.linkProgram(r),g=e.gl&&e.gl.getUniformLocation(r,"Texture"),s=e.gl&&e.gl.getUniformLocation(r,"ProjMtx"),c=e.gl&&e.gl.getAttribLocation(r,"Position")||0,d=e.gl&&e.gl.getAttribLocation(r,"UV")||0,p=e.gl&&e.gl.getAttribLocation(r,"Color")||0,f=e.gl&&e.gl.createBuffer(),y=e.gl&&e.gl.createBuffer(),B()}function V(){F(),e.gl&&e.gl.deleteBuffer(f),f=null,e.gl&&e.gl.deleteBuffer(y),y=null,g=null,s=null,c=-1,d=-1,p=-1,e.gl&&e.gl.deleteProgram(r),r=null,e.gl&&e.gl.deleteShader(u),u=null,e.gl&&e.gl.deleteShader(i),i=null}e.CreateDeviceObjects=K,e.CreateFontsTexture=B,e.DestroyDeviceObjects=V,e.DestroyFontsTexture=F,e.Init=function(t){const n=l.GetIO();"undefined"!=typeof window?(n.BackendPlatformName="imgui_impl_browser",l.LoadIniSettingsFromMemory(window.localStorage.getItem("imgui.ini")||"")):n.BackendPlatformName="imgui_impl_console","undefined"!=typeof navigator&&(n.ConfigMacOSXBehaviors=null!==navigator.platform.match(/Mac/)),"undefined"!=typeof document&&(document.body.addEventListener("copy",E),document.body.addEventListener("cut",D),document.body.addEventListener("paste",I)),n.SetClipboardTextFn=(e,t)=>{a=t,"undefined"!=typeof navigator&&void 0!==navigator.clipboard&&navigator.clipboard.writeText(a).then(()=>{})},n.GetClipboardTextFn=e=>a,n.ClipboardUserData=null,"undefined"!=typeof window&&(window.addEventListener("resize",m),window.addEventListener("gamepadconnected",b),window.addEventListener("gamepaddisconnected",w)),"undefined"!=typeof window&&(t instanceof HTMLCanvasElement&&(o=t,t=o.getContext("webgl2",{alpha:!1})||o.getContext("webgl",{alpha:!1})||o.getContext("2d")),"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext?(n.BackendRendererName="imgui_impl_webgl2",o=o||t.canvas,e.gl=t):"undefined"!=typeof WebGLRenderingContext&&t instanceof WebGLRenderingContext?(n.BackendRendererName="imgui_impl_webgl",o=o||t.canvas,e.gl=t):"undefined"!=typeof CanvasRenderingContext2D&&t instanceof CanvasRenderingContext2D&&(n.BackendRendererName="imgui_impl_2d",o=o||t.canvas,e.ctx=t)),null!==o&&(m(),o.style.touchAction="none",o.addEventListener("blur",S),o.addEventListener("keydown",R),o.addEventListener("keyup",T),o.addEventListener("keypress",L),o.addEventListener("pointermove",_),o.addEventListener("pointerdown",C),o.addEventListener("contextmenu",h),o.addEventListener("pointerup",M),o.addEventListener("wheel",P)),n.BackendFlags|=l.BackendFlags.HasMouseCursors,n.KeyMap[l.Key.Tab]=9,n.KeyMap[l.Key.LeftArrow]=37,n.KeyMap[l.Key.RightArrow]=39,n.KeyMap[l.Key.UpArrow]=38,n.KeyMap[l.Key.DownArrow]=40,n.KeyMap[l.Key.PageUp]=33,n.KeyMap[l.Key.PageDown]=34,n.KeyMap[l.Key.Home]=36,n.KeyMap[l.Key.End]=35,n.KeyMap[l.Key.Insert]=45,n.KeyMap[l.Key.Delete]=46,n.KeyMap[l.Key.Backspace]=8,n.KeyMap[l.Key.Space]=32,n.KeyMap[l.Key.Enter]=13,n.KeyMap[l.Key.Escape]=27,n.KeyMap[l.Key.KeyPadEnter]=N.NumpadEnter,n.KeyMap[l.Key.A]=65,n.KeyMap[l.Key.C]=67,n.KeyMap[l.Key.V]=86,n.KeyMap[l.Key.X]=88,n.KeyMap[l.Key.Y]=89,n.KeyMap[l.Key.Z]=90,K()},e.NewFrame=function(t){const n=l.GetIO();n.WantSaveIniSettings&&(n.WantSaveIniSettings=!1,"undefined"!=typeof window&&window.localStorage.setItem("imgui.ini",l.SaveIniSettingsToMemory()));const a=o&&o.scrollWidth||640,r=o&&o.scrollHeight||480,u=e.gl&&e.gl.drawingBufferWidth||a,i=e.gl&&e.gl.drawingBufferHeight||r;n.DisplaySize.x=a,n.DisplaySize.y=r,n.DisplayFramebufferScale.x=a>0?u/a:0,n.DisplayFramebufferScale.y=r>0?i/r:0;const g=t-x;if(x=t,n.DeltaTime=g/1e3,n.WantSetMousePos&&console.log("TODO: MousePos",n.MousePos.x,n.MousePos.y),"undefined"!=typeof document)if(n.MouseDrawCursor)document.body.style.cursor="none";else switch(l.GetMouseCursor()){case l.MouseCursor.None:document.body.style.cursor="none";break;default:case l.MouseCursor.Arrow:document.body.style.cursor="default";break;case l.MouseCursor.TextInput:document.body.style.cursor="text";break;case l.MouseCursor.ResizeAll:document.body.style.cursor="all-scroll";break;case l.MouseCursor.ResizeNS:document.body.style.cursor="ns-resize";break;case l.MouseCursor.ResizeEW:document.body.style.cursor="ew-resize";break;case l.MouseCursor.ResizeNESW:document.body.style.cursor="nesw-resize";break;case l.MouseCursor.ResizeNWSE:document.body.style.cursor="nwse-resize";break;case l.MouseCursor.Hand:document.body.style.cursor="move";break;case l.MouseCursor.NotAllowed:document.body.style.cursor="not-allowed"}for(let e=0;e<n.NavInputs.length;++e);if(n.ConfigFlags&l.ConfigFlags.NavEnableGamepad){const e="undefined"!=typeof navigator&&"function"==typeof navigator.getGamepads?navigator.getGamepads():[];for(let t=0;t<e.length;++t){const a=e[t];if(!a)continue;n.BackendFlags|=l.BackendFlags.HasGamepad;const o=a.buttons.length,r=a.axes.length;function s(e,t){a&&o>t&&a.buttons[t].pressed&&(n.NavInputs[e]=1)}function c(e,t,l,o){if(!a)return;let u=r>t?a.axes[t]:l;u=(u-l)/(o-l),u>1&&(u=1),n.NavInputs[e]<u&&(n.NavInputs[e]=u)}const u=a.id.match(/^([0-9a-f]{4})-([0-9a-f]{4})-.*$/),i=a.id.match(/^.*\(.*Vendor: ([0-9a-f]{4}) Product: ([0-9a-f]{4})\).*$/);switch((u&&u[1]||i&&i[1]||"0000")+(u&&u[2]||i&&i[2]||"0000")){case"046dc216":s(l.NavInput.Activate,1),s(l.NavInput.Cancel,2),s(l.NavInput.Menu,0),s(l.NavInput.Input,3),c(l.NavInput.DpadLeft,4,-.3,-.9),c(l.NavInput.DpadRight,4,.3,.9),c(l.NavInput.DpadUp,5,-.3,-.9),c(l.NavInput.DpadDown,5,.3,.9),s(l.NavInput.FocusPrev,4),s(l.NavInput.FocusNext,5),s(l.NavInput.TweakSlow,6),s(l.NavInput.TweakFast,7),c(l.NavInput.LStickLeft,0,-.3,-.9),c(l.NavInput.LStickRight,0,.3,.9),c(l.NavInput.LStickUp,1,-.3,-.9),c(l.NavInput.LStickDown,1,.3,.9);break;case"046dc21d":s(l.NavInput.Activate,0),s(l.NavInput.Cancel,1),s(l.NavInput.Menu,2),s(l.NavInput.Input,3),s(l.NavInput.DpadLeft,14),s(l.NavInput.DpadRight,15),s(l.NavInput.DpadUp,12),s(l.NavInput.DpadDown,13),s(l.NavInput.FocusPrev,4),s(l.NavInput.FocusNext,5),c(l.NavInput.TweakSlow,6,.3,.9),c(l.NavInput.TweakFast,7,.3,.9),c(l.NavInput.LStickLeft,0,-.3,-.9),c(l.NavInput.LStickRight,0,.3,.9),c(l.NavInput.LStickUp,1,-.3,-.9),c(l.NavInput.LStickDown,1,.3,.9);break;case"2dc86001":case"2dc86101":s(l.NavInput.Activate,1),s(l.NavInput.Cancel,0),s(l.NavInput.Menu,4),s(l.NavInput.Input,3),c(l.NavInput.DpadLeft,6,-.3,-.9),c(l.NavInput.DpadRight,6,.3,.9),c(l.NavInput.DpadUp,7,-.3,-.9),c(l.NavInput.DpadDown,7,.3,.9),s(l.NavInput.FocusPrev,6),s(l.NavInput.FocusNext,7),s(l.NavInput.TweakSlow,8),s(l.NavInput.TweakFast,9),c(l.NavInput.LStickLeft,0,-.3,-.9),c(l.NavInput.LStickRight,0,.3,.9),c(l.NavInput.LStickUp,1,-.3,-.9),c(l.NavInput.LStickDown,1,.3,.9);break;default:s(l.NavInput.Activate,0),s(l.NavInput.Cancel,1),s(l.NavInput.Menu,2),s(l.NavInput.Input,3),s(l.NavInput.DpadLeft,14),s(l.NavInput.DpadRight,15),s(l.NavInput.DpadUp,12),s(l.NavInput.DpadDown,13),s(l.NavInput.FocusPrev,4),s(l.NavInput.FocusNext,5),s(l.NavInput.TweakSlow,6),s(l.NavInput.TweakFast,7),c(l.NavInput.LStickLeft,0,-.3,-.9),c(l.NavInput.LStickRight,0,.3,.9),c(l.NavInput.LStickUp,1,-.3,-.9),c(l.NavInput.LStickDown,1,.3,.9)}}}},e.RenderDrawData=function(t=l.GetDrawData()){const n=l.GetIO();if(null===t)throw new Error;e.gl||e.ctx||console.log(t);const a=n.DisplaySize.x*n.DisplayFramebufferScale.x,o=n.DisplaySize.y*n.DisplayFramebufferScale.y;if(0===a||0===o)return;t.ScaleClipRects(n.DisplayFramebufferScale);const u="undefined"!=typeof WebGL2RenderingContext&&e.gl instanceof WebGL2RenderingContext&&e.gl||null,i=e.gl&&e.gl.getExtension("OES_vertex_array_object")||null,v=e.gl&&e.gl.getParameter(e.gl.ACTIVE_TEXTURE)||null,x=e.gl&&e.gl.getParameter(e.gl.CURRENT_PROGRAM)||null,E=e.gl&&e.gl.getParameter(e.gl.TEXTURE_BINDING_2D)||null,D=e.gl&&e.gl.getParameter(e.gl.ARRAY_BUFFER_BINDING)||null,I=e.gl&&e.gl.getParameter(e.gl.ELEMENT_ARRAY_BUFFER_BINDING)||null,m=u&&u.getParameter(u.VERTEX_ARRAY_BINDING)||e.gl&&i&&e.gl.getParameter(i.VERTEX_ARRAY_BINDING_OES)||null,b=e.gl&&e.gl.getParameter(e.gl.VIEWPORT)||null,w=e.gl&&e.gl.getParameter(e.gl.SCISSOR_BOX)||null,S=e.gl&&e.gl.getParameter(e.gl.BLEND_SRC_RGB)||null,N=e.gl&&e.gl.getParameter(e.gl.BLEND_DST_RGB)||null,R=e.gl&&e.gl.getParameter(e.gl.BLEND_SRC_ALPHA)||null,T=e.gl&&e.gl.getParameter(e.gl.BLEND_DST_ALPHA)||null,L=e.gl&&e.gl.getParameter(e.gl.BLEND_EQUATION_RGB)||null,_=e.gl&&e.gl.getParameter(e.gl.BLEND_EQUATION_ALPHA)||null,A=e.gl&&e.gl.getParameter(e.gl.BLEND)||null,C=e.gl&&e.gl.getParameter(e.gl.CULL_FACE)||null,h=e.gl&&e.gl.getParameter(e.gl.DEPTH_TEST)||null,M=e.gl&&e.gl.getParameter(e.gl.SCISSOR_TEST)||null,P=u&&u.createVertexArray()||i&&i.createVertexArrayOES();e.gl&&e.gl.enable(e.gl.BLEND),e.gl&&e.gl.blendEquation(e.gl.FUNC_ADD),e.gl&&e.gl.blendFunc(e.gl.SRC_ALPHA,e.gl.ONE_MINUS_SRC_ALPHA),e.gl&&e.gl.disable(e.gl.CULL_FACE),e.gl&&e.gl.disable(e.gl.DEPTH_TEST),e.gl&&e.gl.enable(e.gl.SCISSOR_TEST),e.gl&&e.gl.viewport(0,0,a,o);const B=t.DisplayPos.x,F=t.DisplayPos.x+t.DisplaySize.x,K=t.DisplayPos.y,V=t.DisplayPos.y+t.DisplaySize.y,O=new Float32Array([2/(F-B),0,0,0,0,2/(K-V),0,0,0,0,-1,0,(F+B)/(B-F),(K+V)/(V-K),0,1]);e.gl&&e.gl.useProgram(r),e.gl&&e.gl.uniform1i(g,0),e.gl&&s&&e.gl.uniformMatrix4fv(s,!1,O),u&&u.bindVertexArray(P)||i&&i.bindVertexArrayOES(P),e.gl&&e.gl.bindBuffer(e.gl.ARRAY_BUFFER,f),e.gl&&e.gl.enableVertexAttribArray(c),e.gl&&e.gl.enableVertexAttribArray(d),e.gl&&e.gl.enableVertexAttribArray(p),e.gl&&e.gl.vertexAttribPointer(c,2,e.gl.FLOAT,!1,l.DrawVertSize,l.DrawVertPosOffset),e.gl&&e.gl.vertexAttribPointer(d,2,e.gl.FLOAT,!1,l.DrawVertSize,l.DrawVertUVOffset),e.gl&&e.gl.vertexAttribPointer(p,4,e.gl.UNSIGNED_BYTE,!0,l.DrawVertSize,l.DrawVertColOffset);const k=t.DisplayPos,U=e.gl&&(4===l.DrawIdxSize?e.gl.UNSIGNED_INT:e.gl.UNSIGNED_SHORT)||0;t.IterateDrawLists(t=>{e.gl||e.ctx||console.log(t),e.gl||e.ctx||console.log("VtxBuffer.length",t.VtxBuffer.length),e.gl||e.ctx||console.log("IdxBuffer.length",t.IdxBuffer.length),e.gl&&e.gl.bindBuffer(e.gl.ARRAY_BUFFER,f),e.gl&&e.gl.bufferData(e.gl.ARRAY_BUFFER,t.VtxBuffer,e.gl.STREAM_DRAW),e.gl&&e.gl.bindBuffer(e.gl.ELEMENT_ARRAY_BUFFER,y),e.gl&&e.gl.bufferData(e.gl.ELEMENT_ARRAY_BUFFER,t.IdxBuffer,e.gl.STREAM_DRAW),t.IterateDrawCmds(n=>{if(e.gl||e.ctx||console.log(n),e.gl||e.ctx||console.log("ElemCount",n.ElemCount),e.gl||e.ctx||console.log("ClipRect",n.ClipRect.x,o-n.ClipRect.w,n.ClipRect.z-n.ClipRect.x,n.ClipRect.w-n.ClipRect.y),e.gl||e.ctx||console.log("TextureId",n.TextureId),!e.gl&&!e.ctx){console.log("i: pos.x pos.y uv.x uv.y col");for(let e=0;e<Math.min(3,n.ElemCount);++e){const n=new l.DrawVert(t.VtxBuffer.buffer,t.VtxBuffer.byteOffset+e*l.DrawVertSize);console.log(`${e}: ${n.pos[0].toFixed(2)} ${n.pos[1].toFixed(2)} ${n.uv[0].toFixed(5)} ${n.uv[1].toFixed(5)} ${("00000000"+n.col[0].toString(16)).substr(-8)}`)}}if(null!==n.UserCallback)n.UserCallback(t,n);else{const r=new l.Vec4(n.ClipRect.x-k.x,n.ClipRect.y-k.y,n.ClipRect.z-k.x,n.ClipRect.w-k.y);if(r.x<a&&r.y<o&&r.z>=0&&r.w>=0&&(e.gl&&e.gl.scissor(r.x,o-r.w,r.z-r.x,r.w-r.y),e.gl&&e.gl.activeTexture(e.gl.TEXTURE0),e.gl&&e.gl.bindTexture(e.gl.TEXTURE_2D,n.TextureId),e.gl&&e.gl.drawElements(e.gl.TRIANGLES,n.ElemCount,U,n.IdxOffset*l.DrawIdxSize),e.ctx)){e.ctx.save(),e.ctx.beginPath(),e.ctx.rect(r.x,r.y,r.z-r.x,r.w-r.y),e.ctx.clip();const a=4===l.DrawIdxSize?new Uint32Array(t.IdxBuffer.buffer,t.IdxBuffer.byteOffset+n.IdxOffset*l.DrawIdxSize):new Uint16Array(t.IdxBuffer.buffer,t.IdxBuffer.byteOffset+n.IdxOffset*l.DrawIdxSize);for(let o=0;o<n.ElemCount;o+=3){const r=a[o+0],u=a[o+1],i=a[o+2],g=new l.DrawVert(t.VtxBuffer.buffer,t.VtxBuffer.byteOffset+r*l.DrawVertSize),s=new l.DrawVert(t.VtxBuffer.buffer,t.VtxBuffer.byteOffset+u*l.DrawVertSize),c=new l.DrawVert(t.VtxBuffer.buffer,t.VtxBuffer.byteOffset+i*l.DrawVertSize),d=a[o+3],p=a[o+4],f=a[o+5],y=new l.DrawVert(t.VtxBuffer.buffer,t.VtxBuffer.byteOffset+d*l.DrawVertSize),v=new l.DrawVert(t.VtxBuffer.buffer,t.VtxBuffer.byteOffset+p*l.DrawVertSize),x=new l.DrawVert(t.VtxBuffer.buffer,t.VtxBuffer.byteOffset+f*l.DrawVertSize);let E=!0,D=g,I=g,m=g,b=g;for(const e of[s,c,y,v,x]){let t=!1;e.pos[0]<=D.pos[0]&&e.pos[1]<=D.pos[1]&&(D=e,t=!0),e.pos[0]<=I.pos[0]&&e.pos[1]>=I.pos[1]&&(I=e,t=!0),e.pos[0]>=m.pos[0]&&e.pos[1]<=m.pos[1]&&(m=e,t=!0),e.pos[0]>=b.pos[0]&&e.pos[1]>=b.pos[1]&&(b=e,t=!0),t||(E=!1)}if(E=E&&D.pos[0]===I.pos[0],E=E&&m.pos[0]===b.pos[0],E=E&&D.pos[1]===m.pos[1],E=E&&I.pos[1]===b.pos[1],E){if(D.uv[0]===b.uv[0]||D.uv[1]===b.uv[1])e.ctx.beginPath(),e.ctx.rect(D.pos[0],D.pos[1],b.pos[0]-D.pos[0],b.pos[1]-D.pos[1]),e.ctx.fillStyle=`rgba(${g.col[0]>>0&255}, ${g.col[0]>>8&255}, ${g.col[0]>>16&255}, ${(g.col[0]>>24&255)/255})`,e.ctx.fill();else{const t=n.TextureId,l=t instanceof HTMLVideoElement?t.videoWidth:t.width,a=t instanceof HTMLVideoElement?t.videoHeight:t.height;t&&e.ctx.drawImage(t,D.uv[0]*l,D.uv[1]*a,(b.uv[0]-D.uv[0])*l,(b.uv[1]-D.uv[1])*a,D.pos[0],D.pos[1],b.pos[0]-D.pos[0],b.pos[1]-D.pos[1])}o+=3}else e.ctx.beginPath(),e.ctx.moveTo(g.pos[0],g.pos[1]),e.ctx.lineTo(s.pos[0],s.pos[1]),e.ctx.lineTo(c.pos[0],c.pos[1]),e.ctx.closePath(),e.ctx.fillStyle=`rgba(${g.col[0]>>0&255}, ${g.col[0]>>8&255}, ${g.col[0]>>16&255}, ${(g.col[0]>>24&255)/255})`,e.ctx.fill()}e.ctx.restore()}}})}),u&&u.deleteVertexArray(P)||i&&i.deleteVertexArrayOES(P),e.gl&&null!==x&&e.gl.useProgram(x),e.gl&&null!==E&&e.gl.bindTexture(e.gl.TEXTURE_2D,E),e.gl&&null!==v&&e.gl.activeTexture(v),u&&u.bindVertexArray(m)||i&&i.bindVertexArrayOES(m),e.gl&&null!==D&&e.gl.bindBuffer(e.gl.ARRAY_BUFFER,D),e.gl&&null!==I&&e.gl.bindBuffer(e.gl.ELEMENT_ARRAY_BUFFER,I),e.gl&&null!==L&&null!==_&&e.gl.blendEquationSeparate(L,_),e.gl&&null!==S&&null!==R&&null!==N&&null!==T&&e.gl.blendFuncSeparate(S,R,N,T),e.gl&&(A?e.gl.enable(e.gl.BLEND):e.gl.disable(e.gl.BLEND)),e.gl&&(C?e.gl.enable(e.gl.CULL_FACE):e.gl.disable(e.gl.CULL_FACE)),e.gl&&(h?e.gl.enable(e.gl.DEPTH_TEST):e.gl.disable(e.gl.DEPTH_TEST)),e.gl&&(M?e.gl.enable(e.gl.SCISSOR_TEST):e.gl.disable(e.gl.SCISSOR_TEST)),e.gl&&null!==b&&e.gl.viewport(b[0],b[1],b[2],b[3]),e.gl&&null!==w&&e.gl.scissor(w[0],w[1],w[2],w[3])},e.Shutdown=function(){V(),null!==o&&(o.removeEventListener("blur",S),o.removeEventListener("keydown",R),o.removeEventListener("keyup",T),o.removeEventListener("keypress",L),o.removeEventListener("pointermove",_),o.removeEventListener("pointerdown",C),o.removeEventListener("contextmenu",h),o.removeEventListener("pointerup",M),o.removeEventListener("wheel",P)),e.gl=null,e.ctx=null,o=null,"undefined"!=typeof window&&(window.removeEventListener("resize",m),window.removeEventListener("gamepadconnected",b),window.removeEventListener("gamepaddisconnected",w)),"undefined"!=typeof document&&(document.body.removeEventListener("copy",E),document.body.removeEventListener("cut",D),document.body.removeEventListener("paste",I))},Object.defineProperty(e,"__esModule",{value:!0})}));
